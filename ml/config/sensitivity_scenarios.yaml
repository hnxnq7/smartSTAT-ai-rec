# Sensitivity Test Scenarios - Prioritized by Expected Impact on Expired Rate
# Each scenario tests specific parameter combinations
# Expected qualitative results: expiry down/up, stockout up/down, and why

scenarios:
  # BASELINE: Current Round 9 configuration
  baseline:
    description: "Current Round 9 optimal configuration"
    shelf_life_days:
      A: 240
      B: 240
      C: 240
      D: 240
      E: 180
    lead_time_days:
      A: 5
      B: 5
      C: 5
      D: 5
      E: 5
    order_cadence_days:
      A: 4
      B: 4
      C: 4
      D: 4
      E: 4
    service_level_target:
      routine: 0.995  # 99.5%
      critical: 0.995
    moq_enabled: false
    expected_result:
      expired_rate: "~70%"
      stockout_rate: "~1.09%"
      notes: "Current baseline - short shelf life drives high expiration"

  # S1: Longer Shelf Life (240 → 365 days) - Highest Leverage
  S1:
    description: "Increase shelf life to 1 year (365 days) - primary driver"
    shelf_life_days:
      A: 365
      B: 365
      C: 365
      D: 365
      E: 180
    lead_time_days:
      A: 5
      B: 5
      C: 5
      D: 5
      E: 2
    order_cadence_days:
      A: 4
      B: 4
      C: 4
      D: 4
      E: 3
    service_level_target:
      routine: 0.995
      critical: 0.995
    moq_enabled: false
    expected_result:
      expired_rate: "Down ~30-40 pp → ~30-40%"
      stockout_rate: "No change (same ordering logic)"
      notes: "Longer shelf life gives more time for consumption before expiration"

  # S2: Longer Shelf Life + Realistic Cadence (4 → 7 days)
  S2:
    description: "Shelf life 365 days + weekly ordering cadence"
    shelf_life_days:
      A: 365
      B: 365
      C: 365
      D: 365
      E: 180
    lead_time_days:
      A: 5
      B: 5
      C: 5
      D: 7
      E: 2
    order_cadence_days:
      A: 7
      B: 14
      C: 7
      D: 7
      E: 3
    service_level_target:
      routine: 0.995
      critical: 0.995
    moq_enabled: false
    expected_result:
      expired_rate: "Down ~35-45 pp → ~25-35%"
      stockout_rate: "Slight increase (~1.2%) - less frequent orders"
      notes: "Weekly cadence aligns with real hospital practices, reduces over-ordering"

  # S3: Full Realistic (Medium Shelf Life + Service Level + Cadence)
  S3:
    description: "730-day shelf life, 98% service level, weekly cadence"
    shelf_life_days:
      A: 730
      B: 730
      C: 730
      D: 730
      E: 180
    lead_time_days:
      A: 5
      B: 5
      C: 5
      D: 7
      E: 2
    order_cadence_days:
      A: 7
      B: 14
      C: 7
      D: 7
      E: 3
    service_level_target:
      routine: 0.98  # Reduced from 99.5%
      critical: 0.995
    moq_enabled: false
    expected_result:
      expired_rate: "Down ~40-50 pp → ~20-30%"
      stockout_rate: "Slight increase (~1.3-1.5%) - lower safety stock"
      notes: "2-year shelf life + realistic service level + weekly ordering"

  # S4: Long Shelf Life + Reduced Service Level
  S4:
    description: "1095-day shelf life (3 years), 98% service level"
    shelf_life_days:
      A: 1095
      B: 1095
      C: 1095
      D: 1095
      E: 180
    lead_time_days:
      A: 5
      B: 5
      C: 5
      D: 7
      E: 2
    order_cadence_days:
      A: 7
      B: 14
      C: 7
      D: 7
      E: 3
    service_level_target:
      routine: 0.98
      critical: 0.995
    moq_enabled: false
    expected_result:
      expired_rate: "Down ~45-55 pp → ~15-25%"
      stockout_rate: "Slight increase (~1.5%) - lower safety stock"
      notes: "Very long shelf life allows bulk ordering with minimal expiration risk"

  # S5: Test Short Shelf Life Items (edge case)
  S5:
    description: "Short shelf life (180 days) for all - worst case"
    shelf_life_days:
      A: 180
      B: 180
      C: 180
      D: 180
      E: 180
    lead_time_days:
      A: 5
      B: 5
      C: 5
      D: 7
      E: 2
    order_cadence_days:
      A: 3
      B: 3
      C: 3
      D: 3
      E: 3
    service_level_target:
      routine: 0.98
      critical: 0.995
    moq_enabled: false
    expected_result:
      expired_rate: "Up ~5-15 pp → ~75-85%"
      stockout_rate: "May increase - frequent small orders"
      notes: "Short shelf life items remain challenging even with frequent ordering"

  # S6: Long Lead Time Impact
  S6:
    description: "Realistic shelf life but longer lead times (14 days)"
    shelf_life_days:
      A: 730
      B: 730
      C: 730
      D: 730
      E: 180
    lead_time_days:
      A: 14
      B: 14
      C: 14
      D: 14
      E: 7
    order_cadence_days:
      A: 7
      B: 14
      C: 7
      D: 7
      E: 3
    service_level_target:
      routine: 0.98
      critical: 0.995
    moq_enabled: false
    expected_result:
      expired_rate: "Down ~30-40 pp → ~30-40%"
      stockout_rate: "May increase (~1.5-2%) - longer lead times need larger buffers"
      notes: "Longer lead times require more safety stock, but longer shelf life compensates"

  # S7: MOQ Constraints Enabled
  S7:
    description: "Realistic parameters + MOQ/SPQ constraints"
    shelf_life_days:
      A: 730
      B: 730
      C: 730
      D: 730
      E: 180
    lead_time_days:
      A: 5
      B: 5
      C: 5
      D: 7
      E: 2
    order_cadence_days:
      A: 7
      B: 14
      C: 7
      D: 7
      E: 3
    service_level_target:
      routine: 0.98
      critical: 0.995
    moq_enabled: true
    moq_units:
      A: 200
      B: 100
      C: 200
      D: 200
      E: 50
    spq_units:
      A: 25
      B: 10
      C: 25
      D: 25
      E: 10
    expected_result:
      expired_rate: "Down ~35-45 pp → ~25-35% (may be higher for slow items)"
      stockout_rate: "Minimal change"
      notes: "MOQ constraints may force over-ordering for slow items, but longer shelf life helps"

  # S8: Aggressive Buffer Reduction (98% → 95% service level)
  S8:
    description: "Lower service level (95%) to reduce safety stock"
    shelf_life_days:
      A: 730
      B: 730
      C: 730
      D: 730
      E: 180
    lead_time_days:
      A: 5
      B: 5
      C: 5
      D: 7
      E: 2
    order_cadence_days:
      A: 7
      B: 14
      C: 7
      D: 7
      E: 3
    service_level_target:
      routine: 0.95  # Reduced from 98%
      critical: 0.995
    moq_enabled: false
    expected_result:
      expired_rate: "Down ~40-50 pp → ~20-30%"
      stockout_rate: "Increase (~2-3%) - lower safety stock"
      notes: "Trade-off: lower safety stock reduces expiration but increases stockout risk"

  # S9: Combined Optimal (Best Case)
  S9:
    description: "Long shelf life (1095 days) + weekly cadence + 98% service level"
    shelf_life_days:
      A: 1095
      B: 1095
      C: 1095
      D: 1095
      E: 180
    lead_time_days:
      A: 5
      B: 5
      C: 5
      D: 7
      E: 2
    order_cadence_days:
      A: 7
      B: 14
      C: 7
      D: 7
      E: 3
    service_level_target:
      routine: 0.98
      critical: 0.995
    moq_enabled: false
    expected_result:
      expired_rate: "Down ~50-60 pp → ~10-20%"
      stockout_rate: "Slight increase (~1.5%) - acceptable trade-off"
      notes: "Target configuration - best achievable under realistic parameters"

  # S10: Realistic + Category-Specific Shelf Life
  S10:
    description: "Different shelf lives by category (heterogeneous)"
    shelf_life_days:
      A: 730   # Standard medications
      B: 730   # Standard medications
      C: 730   # Standard medications
      D: 730   # Standard medications
      E: 180   # Specialty/emergency (short)
    lead_time_days:
      A: 5
      B: 5
      C: 5
      D: 7
      E: 2
    order_cadence_days:
      A: 7
      B: 14
      C: 7
      D: 7
      E: 3
    service_level_target:
      routine: 0.98
      critical: 0.995
    moq_enabled: false
    expected_result:
      expired_rate: "Down ~35-45 pp → ~25-35%"
      stockout_rate: "Minimal change"
      notes: "Tests heterogeneity - Category E may still have high expiration due to short shelf life"

  # S11: Very Frequent Cadence
  S11:
    description: "Realistic shelf life but very frequent ordering (3 days)"
    shelf_life_days:
      A: 730
      B: 730
      C: 730
      D: 730
      E: 180
    lead_time_days:
      A: 5
      B: 5
      C: 5
      D: 7
      E: 2
    order_cadence_days:
      A: 3
      B: 3
      C: 3
      D: 3
      E: 3
    service_level_target:
      routine: 0.98
      critical: 0.995
    moq_enabled: false
    expected_result:
      expired_rate: "Down ~40-50 pp → ~20-30%"
      stockout_rate: "Minimal change (better if anything)"
      notes: "More frequent ordering = smaller batches = lower waste, but higher ordering costs"

  # S12: Infrequent Cadence + Long Shelf Life
  S12:
    description: "Monthly ordering (30 days) but long shelf life"
    shelf_life_days:
      A: 1095
      B: 1095
      C: 1095
      D: 1095
      E: 180
    lead_time_days:
      A: 5
      B: 5
      C: 5
      D: 7
      E: 2
    order_cadence_days:
      A: 30
      B: 30
      C: 30
      D: 30
      E: 14
    service_level_target:
      routine: 0.98
      critical: 0.995
    moq_enabled: false
    expected_result:
      expired_rate: "Down ~25-35 pp → ~35-45%"
      stockout_rate: "May increase (~1.8-2.5%) - larger batches, less responsive"
      notes: "Less frequent ordering reduces costs but increases expiration risk even with long shelf life"
